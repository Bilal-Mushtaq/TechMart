import{Y as ye,J as B,r as o,Z as I,V as me,$ as a,K as l,H as Q}from"./index-68e82fe2.js";var he={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};const ke=()=>typeof document<"u";let X=!1,w=null,y=!1,K=!1;const R=new Set;function x(e,u){R.forEach(n=>n(e,u))}const pe=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function we(e){return!(e.metaKey||!pe&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function ee(e){y=!0,we(e)&&(w="keyboard",x("keyboard",e))}function h(e){if(w="pointer",e.type==="mousedown"||e.type==="pointerdown"){y=!0;const u=e.composedPath?e.composedPath()[0]:e.target;let n=!1;try{n=u.matches(":focus-visible")}catch{}if(n)return;x("pointer",e)}}function Ee(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}function Ce(e){Ee(e)&&(y=!0,w="virtual")}function ge(e){e.target===window||e.target===document||(!y&&!K&&(w="virtual",x("virtual",e)),y=!1,K=!1)}function Le(){y=!1,K=!0}function te(){return w!=="pointer"}function Pe(){if(!ke()||X)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...n){y=!0,e.apply(this,n)},document.addEventListener("keydown",ee,!0),document.addEventListener("keyup",ee,!0),document.addEventListener("click",Ce,!0),window.addEventListener("focus",ge,!0),window.addEventListener("blur",Le,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",h,!0),document.addEventListener("pointermove",h,!0),document.addEventListener("pointerup",h,!0)):(document.addEventListener("mousedown",h,!0),document.addEventListener("mousemove",h,!0),document.addEventListener("mouseup",h,!0)),X=!0}function Se(e){Pe(),e(te());const u=()=>e(te());return R.add(u),()=>{R.delete(u)}}function Fe(e,u=[]){const n=Object.assign({},e);for(const s of u)s in n&&delete n[s];return n}function Ie(e={}){const u=ye(e),{isDisabled:n,isReadOnly:s,isRequired:P,isInvalid:d,id:H,onBlur:ne,onFocus:ae,"aria-describedby":V}=u,{defaultChecked:A,isChecked:U,isFocusable:oe,onChange:re,isIndeterminate:b,name:q,value:O,tabIndex:T=void 0,"aria-label":W,"aria-labelledby":_,"aria-invalid":S,...se}=e,F=Fe(se,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),D=B(re),j=B(ne),z=B(ae),[E,ie]=o.useState(!1),[v,C]=o.useState(!1),[k,G]=o.useState(!1),[p,m]=o.useState(!1);o.useEffect(()=>Se(ie),[]);const c=o.useRef(null),[J,ue]=o.useState(!0),[de,g]=o.useState(!!A),M=U!==void 0,r=M?U:de,N=o.useCallback(t=>{if(s||n){t.preventDefault();return}M||g(r?t.target.checked:b?!0:t.target.checked),D==null||D(t)},[s,n,r,M,b,D]);I(()=>{c.current&&(c.current.indeterminate=!!b)},[b]),me(()=>{n&&C(!1)},[n,C]),I(()=>{const t=c.current;if(!(t!=null&&t.form))return;const i=()=>{g(!!A)};return t.form.addEventListener("reset",i),()=>{var f;return(f=t.form)==null?void 0:f.removeEventListener("reset",i)}},[]);const Y=n&&!oe,Z=o.useCallback(t=>{t.key===" "&&m(!0)},[m]),$=o.useCallback(t=>{t.key===" "&&m(!1)},[m]);I(()=>{if(!c.current)return;c.current.checked!==r&&g(c.current.checked)},[c.current]);const le=o.useCallback((t={},i=null)=>{const f=L=>{v&&L.preventDefault(),m(!0)};return{...t,ref:i,"data-active":a(p),"data-hover":a(k),"data-checked":a(r),"data-focus":a(v),"data-focus-visible":a(v&&E),"data-indeterminate":a(b),"data-disabled":a(n),"data-invalid":a(d),"data-readonly":a(s),"aria-hidden":!0,onMouseDown:l(t.onMouseDown,f),onMouseUp:l(t.onMouseUp,()=>m(!1)),onMouseEnter:l(t.onMouseEnter,()=>G(!0)),onMouseLeave:l(t.onMouseLeave,()=>G(!1))}},[p,r,n,v,E,k,b,d,s]),ce=o.useCallback((t={},i=null)=>({...t,ref:i,"data-active":a(p),"data-hover":a(k),"data-checked":a(r),"data-focus":a(v),"data-focus-visible":a(v&&E),"data-indeterminate":a(b),"data-disabled":a(n),"data-invalid":a(d),"data-readonly":a(s)}),[p,r,n,v,E,k,b,d,s]),fe=o.useCallback((t={},i=null)=>({...F,...t,ref:Q(i,f=>{f&&ue(f.tagName==="LABEL")}),onClick:l(t.onClick,()=>{var f;J||((f=c.current)==null||f.click(),requestAnimationFrame(()=>{var L;(L=c.current)==null||L.focus({preventScroll:!0})}))}),"data-disabled":a(n),"data-checked":a(r),"data-invalid":a(d)}),[F,n,r,d,J]),be=o.useCallback((t={},i=null)=>({...t,ref:Q(c,i),type:"checkbox",name:q,value:O,id:H,tabIndex:T,onChange:l(t.onChange,N),onBlur:l(t.onBlur,j,()=>C(!1)),onFocus:l(t.onFocus,z,()=>C(!0)),onKeyDown:l(t.onKeyDown,Z),onKeyUp:l(t.onKeyUp,$),required:P,checked:r,disabled:Y,readOnly:s,"aria-label":W,"aria-labelledby":_,"aria-invalid":S?!!S:d,"aria-describedby":V,"aria-disabled":n,style:he}),[q,O,H,N,j,z,Z,$,P,r,Y,s,W,_,S,d,V,n,T]),ve=o.useCallback((t={},i=null)=>({...t,ref:i,onMouseDown:l(t.onMouseDown,De),"data-disabled":a(n),"data-checked":a(r),"data-invalid":a(d)}),[r,n,d]);return{state:{isInvalid:d,isFocused:v,isChecked:r,isActive:p,isHovered:k,isIndeterminate:b,isDisabled:n,isReadOnly:s,isRequired:P},getRootProps:fe,getCheckboxProps:le,getIndicatorProps:ce,getInputProps:be,getLabelProps:ve,htmlProps:F}}function De(e){e.preventDefault(),e.stopPropagation()}export{Ie as u};
